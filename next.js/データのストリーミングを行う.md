#RSC
# ストリーミングとは

サーバーでレンダリングしたUIを、準備ができた部分から順次ブラウザに送信する機能。これにより、ユーザーはページのすべてのコンテンツが読み込まれるのを待つことなく、表示された部分から操作、閲覧を行うことができる。

![[Pasted image 20250930105339.png]]
# ストリーミングのメリット

* **体感速度の向上**: ページの初期表示をすぐに送信できるため、ユーザーにページの読み込みを速く感じさせることができる。
- **TTFB（Time to First Byte）の短縮**: サーバーが最初のHTMLを送信するまでの時間が短縮され、ページの表示パフォーマンスを向上させることができる。
- **効率的なデータ取得**: ページ全体で最も時間のかかるデータ取得処理が、他の部分のレンダリングをブロックすることがなくなる。

# ストリーミング (Server Component)

ServerComponentでストリーミングを行う場合は、データを取得するコンポーネントを親コンポーネント上で`Suspense`でラップする必要がある。

```tsx
// page.tsx
import { Suspense } from "react";
import TodoList from "./todoList";

export default function Page() {
	return (
		<div>
			<h1>Todo</h1>
			{/* データの取得が完了するまでLoading...を表示 */}
			<Suspense fallback={<div>Loading...</div>}>
				<TodoList />
			</Suspense>
		</div>
	)
}
```

```tsx
// todoList.tsx
import { getTodos } from "./utils";

// Todoリストを取得・表示するコンポーネント
export default async function TodoList() {
	const todos = await getTodos();

	return (
		<div>
			{todos.map((todo, index) => (
				<div key={index}>{todo}</div>
			))}
		</div>
	)
}
```

# ストリーミング (Client Component)

Client Component上では直接データを取得することができないため、